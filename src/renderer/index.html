<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Teams Troubleshooter</title>
  </head>
  <body>
    <div id ="charting-area" style=" background-color:lightblue; top:10px; position:fixed; width:99%; border-style: solid; height:45%">this place is for charts</div>
    <link href="./../../node_modules/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
    <div id="logs-table" style="height:50%; position:fixed; width:99%; bottom:10px; border-style: solid"></div>
    <a href="#" id="drag">item</a>
  </body>

    <script>
      let ipcRenderer = require("electron").ipcRenderer;
      ipcRenderer.on("data", (event, data) => {
          showTable(data);
      });

      ipcRenderer.on("debugData", (event, data) => {
        // tslint:disable-next-line: no-console
        console.log(JSON.stringify(data));
      });

      function showTable(logLines) {
        const Tabulator = require("tabulator-tables");
        const table = new Tabulator("#logs-table", {
            autoResize: true,
            columns: [
                {title: "Date", field: "date"},
                {title: "PID", field: "pid"},
                {title: "Type", field: "type"},
                {title: "Message", field: "message"},
            ],
            groupBy: "pid",
            groupStartOpen: true,
        });

        table.setData(logLines);
      }

      document.ondragover = document.ondrop = (ev) => {
          ev.preventDefault();
      };

      document.body.ondrop = (ev) => {
          if (ev && ev.dataTransfer && ev.dataTransfer.files && ev.dataTransfer.files[0]) {
            ipcRenderer.send("fileLocation", ev.dataTransfer.files[0].path);
          }
          ev.preventDefault();
      };

    </script>
    <script type="text/javascript" src="./../../node_modules/tabulator-tables/dist/js/tabulator.min.js"></script>
    </script>
</html>
